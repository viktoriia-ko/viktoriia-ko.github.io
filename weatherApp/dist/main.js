(()=>{const e=document.getElementById("search"),n=document.querySelector(".match-list");e.addEventListener("keypress",(function(n){13==n.keyCode&&t(e.value)}));const t=e=>{fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=metric&appid=e5e29ebfa01d8c4d760211546a67ba41`).then((e=>e.json())).then(r)},r=e=>{console.log(e),document.querySelector(".location .city").innerText=`${e.name}, ${e.sys.country}`;let n=new Date;document.querySelector(".location .date").innerText=a(n),document.querySelector(".current .icon").innerHTML=`<img src="https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png">`,document.querySelector(".current .temp").innerHTML=`${Math.round(e.main.temp)}<span>Â°c</span>`,document.querySelector(".current .weather").innerText=`${e.weather[0].description}`,document.querySelector(".current .wind_speed").innerHTML=`Wind speed: ${Math.round(e.wind.speed)} m/s`,document.querySelector(".current .humidity").innerHTML=`Humidity: ${e.main.humidity} %`},a=e=>`${["Sunday","Monday","Thuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]} ${e.getDate()} ${["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]} ${e.getFullYear()}`;e.addEventListener("input",(()=>(async r=>{const a=await fetch("/server/city.list.json");let c=(await a.json()).filter((e=>{const n=new RegExp(`^${r}`,"gi");return e.name.match(n)}));0===r.length&&(c=[],n.innerHTML=""),(r=>{if(r.length>0){const e=r.map((e=>`\n    <div class="card">\n      <h4>${e.name}, ${e.country}</h4>\n    </div>`)).join("");n.innerHTML=e}n.onclick=function(r){e.value=r.target.innerText,t(e.value),n.innerHTML=""}})(c)})(e.value))),t("Tallinn")})();